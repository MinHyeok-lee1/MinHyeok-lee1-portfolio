# 📘 STM32 Peripheral 정리

STM32의 **Peripheral(주변장치)**은 마이크로컨트롤러(MCU) 내에서 **외부 세계와의 상호작용**을 가능하게 해주는 **하드웨어 모듈**  
각 주변장치는 특정 기능을 담당하며 STM32 시리즈에서는 매우 다양하고 강력한 주변장치를 제공

---

### 🧠 Peripheral이란?
> **STM32의 핵심 CPU(Core)**는 명령을 처리
> 실제 입출력(I/O), 통신, 타이머, ADC 등의 외부 장치 제어는 **Peripheral**이 담당

---

## 📂 STM32 주변장치 분류

### 🟩 1. **기본 I/O**
| Peripheral     | 설명 |
|----------------|------|
| **GPIO**       | 일반 입력/출력 핀 |
| **EXTI**       | 외부 인터럽트 (버튼 등) |
| **AFIO**       | 핀의 대체 기능 설정 (Alternate Function) |

---

### 🟦 2. **타이머 및 카운터**
| Peripheral       | 설명 |
|------------------|------|
| **TIMx**         | 일반 목적 타이머 (PWM, Delay 등) |
| **SysTick**      | 시스템 타이머 (ms tick, RTOS tick용) |
| **Watchdog (IWDG, WWDG)** | 시스템 동작 감시 (Deadlock 감지) |
| **RTC**          | 실시간 시계 (날짜, 시간 유지) |

---

### 🟧 3. **통신 인터페이스**
| Peripheral | 설명 |
|------------|------|
| **USART/UART** | 직렬 통신 (시리얼, PC, GPS 등) |
| **SPI**        | 고속 동기식 시리얼 통신 |
| **I2C**        | 저속 시리얼 통신 (센서 등) |
| **CAN**        | 차량 및 산업용 네트워크 통신 |
| **USB**        | USB 디바이스/호스트 기능 |
| **LIN / IrDA / SmartCard** | 특수 통신 |

---

### 🟨 4. **아날로그**
| Peripheral | 설명 |
|------------|------|
| **ADC**    | 아날로그 → 디지털 변환 |
| **DAC**    | 디지털 → 아날로그 변환 |
| **COMP**   | 아날로그 비교기 |
| **OPAMP**  | 연산 증폭기 |

---

### 🟫 5. **메모리 & DMA**
| Peripheral | 설명 |
|------------|------|
| **DMA**    | CPU 개입 없이 메모리 간 데이터 이동 |
| **FLASH**  | 내부 플래시 메모리 제어 |
| **SRAM**   | 내부 RAM |
| **FSMC/QUADSPI** | 외부 메모리 연결 (NOR, NAND, PSRAM 등) |

---

### 🟥 6. **전원 및 클럭**
| Peripheral | 설명 |
|------------|------|
| **PWR**    | 저전력 모드 설정 (Sleep, Stop, Standby) |
| **RCC**    | 클럭 제어 (PLL, HSE, LSE, SYSCLK 등) |
| **BKP**    | 백업 레지스터 및 배터리 연동 |

---

## 🛠 Peripheral 제어 방식

| 방식          | 설명 |
|---------------|------|
| **레지스터 직접 접근** | 성능 최적화에 유리, 복잡 |
| **HAL (STM32Cube HAL)** | STM에서 제공하는 추상화된 API |
| **LL (Low Layer)** | HAL보다 가볍고 성능 중심, 코드 복잡도는 중간 |
| **CMSIS** | ARM 제공 레지스터 정의 기반 표준 |

---

## ✅ 실전 예시

```c
// GPIO 예: LED 토글 (HAL 사용)
HAL_GPIO_TogglePin(GPIOB, GPIO_PIN_0);

// UART 예: 데이터 송신
HAL_UART_Transmit(&huart2, (uint8_t*)"Hello\n", 6, HAL_MAX_DELAY);
```

---
