# 💥 Raspberry Pi Pico 이슈 정리

**Raspberry Pi Pico** 또는 **RP2040 기반 보드** 사용 시 자주 발생하는 **이슈 및 해결법**을 하드웨어, MicroPython, C/C++ SDK, USB 연결 문제 등으로 나누어 정리

---

## ⚠️ Raspberry Pi Pico 이슈 정리

### 🔌 1. USB 연결/업로드 관련 이슈

| 증상                               | 원인                       | 해결 방법                                        |
| ---------------------------------- | -------------------------- | ------------------------------------------------ |
| ⚪ **드라이브가 안 뜸**            | BOOTSEL 누르지 않음        | USB 연결 전에 **BOOTSEL 버튼 누른 채 연결**      |
| ❌ **파일 복사해도 재부팅 안됨**   | UF2 파일 오류              | 올바른 **MicroPython / blink.uf2** 파일인지 확인 |
| ⚠️ **Thonny에서 포트 안 보임**     | 드라이버 또는 포트 문제    | `장치 관리자`에서 COM 포트 확인 / 케이블 교체    |
| 🔄 **업로드 후 코드가 실행 안 됨** | 코드 내부 오류 / 리셋 필요 | 간단한 LED 코드로 확인 / 리셋 후 재연결          |

---

### 💻 2. MicroPython 관련 이슈

| 증상                          | 원인                          | 해결 방법                                            |
| ----------------------------- | ----------------------------- | ---------------------------------------------------- |
| 🧱 **REPL이 안 열림**         | 포트 충돌, 펌웨어 손상        | Pico 포맷 후 MicroPython 다시 업로드                 |
| 🔁 **무한 에러 루프**         | `boot.py` 또는 `main.py` 오류 | BOOTSEL로 다시 진입 → 파일 삭제 또는 수정            |
| 📉 **센서값 이상, 동작 지연** | `sleep()` 과다 / 전원 부족    | 코드 최적화 또는 외부 전원 사용                      |
| ⛔ **라이브러리 없음 오류**   | `import xxx` 실패             | 해당 `.py` 파일을 Pico에 복사하거나 `lib/` 폴더 생성 |

---

### 🔧 3. C/C++ SDK 개발 이슈

| 증상                          | 원인                            | 해결 방법                                               |
| ----------------------------- | ------------------------------- | ------------------------------------------------------- |
| ⚠️ **빌드 실패 (CMake 오류)** | SDK 경로 설정 오류              | `PICO_SDK_PATH` 환경변수 확인 또는 `cmake ..` 경로 점검 |
| 🔒 **UF2 파일 생성 안됨**     | `pico_add_extra_outputs()` 누락 | `CMakeLists.txt`에 해당 명령어 포함 필요                |
| 🧩 **PIO 코드 오류**          | 문법 또는 명령 미지원           | 공식 문서 참조, `pioasm`로 별도 검증 가능               |
| ❗ **핀 정의 안됨 오류**      | `gpio_init()` 등 선언 누락      | `#include "pico/stdlib.h"` 확인, 초기화 필수            |

---

### 🧠 4. 코드/동작 관련 이슈

| 증상                  | 원인                   | 해결 방법                                         |
| --------------------- | ---------------------- | ------------------------------------------------- |
| ❌ **LED 안 켜짐**    | 핀 번호 오류           | 기본 LED는 `25번`, 외부 GPIO는 회로 확인          |
| 💤 **동작 매우 느림** | `sleep_ms()` 과다 사용 | sleep 시간 단축 또는 `millis()`/타이머 사용 고려  |
| 📶 **PWM 안됨**       | 타이머 초기화 누락     | `gpio_set_function(pin, GPIO_FUNC_PWM)` 호출 필요 |
| 🔂 **loop 탈출 안됨** | `while(1)` 구조        | 조건 추가하거나 Watchdog Timer 도입               |

---

### 📡 5. 통신 관련 이슈 (I2C, SPI, UART)

| 증상                        | 원인                                  | 해결 방법                                        |
| --------------------------- | ------------------------------------- | ------------------------------------------------ |
| ❌ **센서 응답 없음 (I2C)** | SDA/SCL 핀 오류 or 풀업 미사용        | 핀 번호 및 4.7kΩ 풀업 저항 확인                  |
| ⛔ **UART 출력 안 보임**    | UART 초기화 누락 또는 TX 핀 설정 오류 | `uart_init()`, `gpio_set_function()` 정확히 설정 |
| 🧪 **SPI 통신 안 됨**       | MISO/MOSI 핀 교차 연결                | 핀 맵 재확인 + 클럭 속도 낮춰 테스트             |

---

### 🔋 6. 전원 및 하드웨어 연결 이슈

| 증상                    | 원인                  | 해결 방법                                |
| ----------------------- | --------------------- | ---------------------------------------- |
| 🔁 **재부팅 반복**      | 전원 부족 또는 노이즈 | USB 전원 대신 안정된 5V 또는 배터리 사용 |
| 🔥 **보드 발열/오동작** | 3.3V 초과 전압 입력   | RP2040 GPIO에 **절대 3.3V 초과 금지**    |
| ⚡ **센서 동작 불량**   | GND 미연결            | 모든 GND를 공통 GND로 연결해야 함        |

---

### 🧩 7. 기타 개발환경 이슈

| 환경            | 증상                   | 해결 방법                                                    |
| --------------- | ---------------------- | ------------------------------------------------------------ |
| VS Code (C/C++) | IntelliSense 동작 안함 | `.vscode/c_cpp_properties.json` 재설정                       |
| Thonny          | 인터프리터 선택 오류   | `도구 > 인터프리터 > MicroPython (Raspberry Pi Pico)` 재선택 |
| PlatformIO      | 업로드 안됨            | `upload_port`, `monitor_speed` 수동 지정 필요                |

---

## ✅ 디버깅 팁 요약

- `LED` 토글로 코드 흐름 파악
- `print()` 또는 `printf()`로 시리얼 디버깅
- `pioasm` 명령어로 PIO 코드 별도 확인
- `boot.py`, `main.py` 삭제 시 안전모드로 복구

---

## 📁 Pico 실전 디버깅 예시

| 상황               | 조치 방법                                     |
| ------------------ | --------------------------------------------- |
| Pico 실행 안됨     | BOOTSEL → MicroPython 재설치                  |
| SPI 센서 동작 안됨 | MISO/MOSI 핀 확인 + 클럭 낮추기               |
| CMake 오류         | `pico_sdk_init()` 또는 경로 설정 재확인       |
| UART 출력 없음     | TX 핀 함수 설정, `uart_init()` 누락 여부 확인 |
