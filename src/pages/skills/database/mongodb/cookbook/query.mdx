# 쿼리 및 프로젝션 연산자 모음

## 비교 쿼리 연산자(Bitwise Query Operators)

- 비교 쿼리 연산자의 종류에는 $eq, $in, $ne, $nin, $gt, $gte, $lt, $lte가 있다.
- 비교연산자는 값 비교를 기반으로 데이터를 반환한다.

비교 쿼리 연산자의 이름과 설명

| 이름 | 설명                                      |
| ---- | ----------------------------------------- |
| $eq  | 지정된 값과 같은 값을 찾는다.             |
| $in  | 배열에 지정된 값과 일치한다.              |
| $ne  | 지정된 값과 같지 않은 모든 값과 일치한다. |
| $nin | 배열에 지정된 값과 일치하지 않는다.       |
| $gt  | 지정된 값보다 큰 값을 찾는다.             |
| $gte | 지정된 값보다 크거나 같은 값을 찾는다.    |
| $lt  | 지정된 값보다 작은 값을 찾는다.           |
| $lte | 지정된 값보다 작거나 같은 값을 찾는다.    |

<br />

## 논리적 쿼리 연산자(Logical Query Operators)

- 논리적 쿼리 연산자 종류에는 $and, $not, $ne, $nor, $or가 있다.
- 논리 연산자는 true 또는 false로 평가되는 식을 기반으로 데이터를 반환한다.

논리적 쿼리 연산자의 이름과 설명

| 이름 | 설명                                                                             |
| ---- | -------------------------------------------------------------------------------- |
| $and | 논리적 AND로 쿼리 절을 조인하여 두 절의 조건과 일치하는 모든 문서를 반환한다.    |
| $not | 쿼리 식의 효과를 반전시키고 쿼리 식과 일치하지 않는 문서를 반환한다.             |
| $nor | 논리적 NOR로 쿼리 절을 조인하면 두 절이 모두 일치하지 않는 모든 문서가 반환한다. |
| $or  | 논리적 OR로 쿼리 절을 조인하면 각 절의 조건과 일치하는 모든 문서가 반환한다.     |

<br />

## 지리-공간 쿼리 선택자(Query Selectors)

- 지리-공간 쿼리 선택자의 종류에는 $geoIntersects, $geoWithin, $near, $nearSphere가 있다.
- 지리-공간 쿼리 연산자는 지리 공간 표현 조건에 따라 데이터를 반환한다.

지리-공간 쿼리 연산자의 이름과 설명

| 이름           | 설명                                                                                                                                     |
| -------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| $geoIntersects | GeoJSON 도형과 교차하는 도형을 선택한다. 2dsphere 인덱스는 $geoIntersects를 지원한다.                                                    |
| $geoWithin     | 경계 GeoJSON 도형 내에서 도형을 선택한다. 2dsphere 및 2d 인덱스는 $geoWithin을 지원한다.                                                 |
| $near          | 특정 지점에 근접한 지리 공간 개체를 반환한다. 지리공간 인덱스가 필요하다.<br /> 2dsphere 및 2d 인덱스는 $near를 지원한다.                |
| $nearSphere    | 구의 한 지점에 근접한 지리 공간 개체를 반환한다.<br /> 지리공간 인덱스가 필요하다.<br /> 2dsphere 및 2d 인덱스는 $nearSphere를 지원한다. |

<br />

## 지리-공간 형상 지정자(Geometry Specifiers)

- 지리-공간 형상 지정자의 종류에는 $box, $center, $centerSphere, $geometry, $maxDistance, $minDistance, $polygon가 있다.
- 지리-공간 형상 지정자는 지리 공간 표현 조건에 따라 도형의 모양 혹은 위치, 거리의 데이터를 반환한다.

지리-공간 형상 지정자의 이름과 설명

| 이름          | 설명                                                                                                                                                                           |
| ------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| $box          | $geoWithin 쿼리에 대해 레거시 좌표 쌍을 사용하여 직사각형 box를 지정한다.<br /> 2d 인덱스는 $box를 지원한다.                                                                   |
| $center       | 평면 Geometry를 사용할 때 레거시 좌표 쌍을 사용하여 $geoWithin 쿼리에 원을 지정한다.<br /> 2d 인덱스는 $center를 지원한다.                                                     |
| $centerSphere | 구형 Geometry를 사용할 때 $geoWithin 쿼리에 대해 원을 지정한다.<br /> \* 레거시 좌표 쌍 또는 GeoJSON 형식을 사용한다. <br /> 2dsphere 및 2d 인덱스는 $centerSphere를 지원한다. |
| $geometry     | GeoJSON 형식의 Geometry를 지리공간 쿼리 연산자에 지정한다.                                                                                                                     |
| $maxDistance  | $near 및 $nearSphere 쿼리의 결과를 제한할 최대 거리를 지정한다. 2dsphere 및 2d 인덱스는 $maxDistance를 지원한다.                                                               |
| $minDistance  | $near 및 $nearSphere 쿼리의 결과를 제한할 최소 거리를 지정한다. 2dsphere 인덱스에만 사용된다.                                                                                  |
| $polygon      | $geoWithin 쿼리에 레거시 좌표 쌍을 사용할 다각형을 지정한다. 2d 인덱스는 $center를 지원한다.                                                                                   |

<br />

## 배열 쿼리 연산자(Array Query Operators)

- 배열 쿼리 연산자의 종류에는 $all, $elemMatch, $size가 있다.
- 배열 연산자는 배열 조건에 따라 데이터를 반환한다.

배열 쿼리 연산자의 이름과 설명

| 이름       | 설명                                                                            |
| ---------- | ------------------------------------------------------------------------------- |
| $all       | 쿼리에 지정된 모든 요소를 포함하는 배열과 일치한다.                             |
| $elemMatch | 배열 필드의 요소가 지정된 모든 $elemMatch 조건과 일치하는 경우 문서를 선택한다. |
| $size      | 배열 필드가 지정된 크기인 경우 문서를 선택한다.                                 |

<br />

## 비트 쿼리 연산자(Bitwise Query Operators)

- 비트 단위 쿼리 연산자의 종류에는 $bitsAllClear, $bitsAllSet, $bitsAnyClear, $bitsAnySet가 있다.
- 비트 연산자는 비트 위치 조건에 따라 데이터를 반환한다.

비트 쿼리 연산자의 이름과 설명

| 이름          | 설명                                                             |
| ------------- | ---------------------------------------------------------------- |
| $bitsAllClear | 비트 위치 집합의 값이 모두 0인 숫자 또는 이진수 값을 일치시킨다. |
| $bitsAllSet   | 비트 위치 집합의 값이 모두 1인 숫자 또는 이진수 값을 일치시킨다. |
| $bitsAnyClear | 비트 위치 집합의 비트 값이 0인 숫자 또는 이진수 값을 일치시킨다. |
| $bitsAnySet   | 비트 위치 집합의 비트 값이 1인 숫자 또는 이진수 값을 일치시킨다. |

<br />

## 투영 연산자(Projection Operators)

- 투영 연산자의 종류에는 $, $elemMatch, $meta, $slice가 있다.
- 투영 연산자는 작업에서 반환되는 필드를 지정한다.

투영 연산자의 이름과 설명

| 이름       | 설명                                                                      |
| ---------- | ------------------------------------------------------------------------- |
| $          | 쿼리 조건과 일치하는 배열의 첫 번째 요소를 Projection한다.                |
| $elemMatch | 지정된 $elemMatch 조건과 일치하는 배열의 첫 번째 요소를 Projection한다.   |
| $meta      | 사용 가능한 문서별 메타데이터를 Projection한다.                           |
| $slice     | 배열에서 투영되는 요소의 수를 제한한다. 건너뛰기 및 제한 조각을 지원한다. |

<br />

## 기타 쿼리 연산자(Miscellaneous Query Operators)

- 기타 쿼리 연산자의 종류에는 $comment, $rand, $natural가 있다.

기타 쿼리 연산자의 이름과 설명

| 이름     | 설명                                                                                                            |
| -------- | --------------------------------------------------------------------------------------------------------------- |
| $comment | 쿼리 술어에 주석을 추가한다.                                                                                    |
| $rand    | 0과 1 사이의 랜덤 플로트를 생성한다.                                                                            |
| $natural | 정방향 또는 역방향 수집 검색에 사용할 수 있는 특수 힌트이다.<br />\* sort() 또는 hint() 메소드를 통해 제공한다. |
