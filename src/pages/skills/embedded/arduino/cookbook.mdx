# Arduino 기술 정리

## 📚 Arduino Cookbook 요약 정리

### 📖 1. 아두이노 기본

| 주제        | 설명                                              |
| ----------- | ------------------------------------------------- |
| 보드 설정   | Arduino IDE 설치, 포트 및 보드 선택               |
| 코드 구조   | `setup()`과 `loop()` 함수 구조 이해               |
| 변수 & 상수 | `int`, `float`, `const`, `#define` 등 기본 자료형 |

---

### 🔌 2. 디지털 입출력

| 항목           | 설명                                           |
| -------------- | ---------------------------------------------- |
| 디지털 핀 제어 | `pinMode()`, `digitalWrite()`, `digitalRead()` |
| LED 깜빡이기   | `delay()` 함수 사용하여 시간 기반 점멸         |
| 버튼 입력 처리 | 풀업/풀다운 저항 사용, `debounce` 처리 기법    |
| 다중 버튼 입력 | 배열과 루프를 통한 확장 처리 방법              |

---

### 📊 3. 아날로그 입출력

| 항목          | 설명                                     |
| ------------- | ---------------------------------------- |
| 아날로그 입력 | `analogRead()`를 통한 센서값 읽기        |
| PWM 출력      | `analogWrite()`로 밝기/속도 조절         |
| 센서 맵핑     | `map()`, `constrain()` 등 수치 변환 활용 |

---

### 🔁 4. 제어 흐름 및 시간

| 항목             | 설명                                                            |     |            |
| ---------------- | --------------------------------------------------------------- | --- | ---------- |
| 상태 머신 구현   | `switch-case`, `enum`을 이용한 논리 제어                        |     |            |
| 논리 제어        | `if`, `else`, `&&`, \`                                          |     | `, `!\` 등 |
| 비차단 시간 처리 | `millis()`를 이용한 논리 타이머 구현 (Blink Without Delay 패턴) |     |            |

---

### 🧠 5. 함수, 배열, 문자열

| 항목        | 설명                                               |
| ----------- | -------------------------------------------------- |
| 사용자 함수 | 파라미터 및 반환형 활용 함수 만들기                |
| 배열 활용   | LED 배열, 센서 배열 관리                           |
| 문자열 처리 | `String` 클래스 vs `char[]`, `strcpy`, `strcmp` 등 |

---

### 📡 6. 직렬 통신 & 디버깅

| 항목             | 설명                                                |
| ---------------- | --------------------------------------------------- |
| Serial 사용      | `Serial.begin()`, `Serial.print()`, `Serial.read()` |
| 다중 시리얼 포트 | Mega 보드에서 `Serial1`, `Serial2` 등 활용          |
| 시리얼 디버깅    | 상태 출력, 데이터 로깅 활용                         |

---

### 🧭 7. 외부 장치 제어

| 장치     | 예시                               |
| -------- | ---------------------------------- |
| 릴레이   | 전류 구동 및 안전 회로 처리        |
| 서보모터 | `Servo` 라이브러리로 각도 제어     |
| DC 모터  | 트랜지스터 또는 모터 드라이버 사용 |
| RGB LED  | PWM 핀 3개로 색상 제어             |

---

### 🔗 8. I2C / SPI 통신

| 항목           | 설명                                             |
| -------------- | ------------------------------------------------ |
| I2C 사용법     | `Wire` 라이브러리, 슬레이브 주소, 다중 센서 연결 |
| SPI 사용법     | `SPI.begin()`, `SPI.transfer()` 등 기본 전송     |
| I2C/SPI 디버깅 | 시리얼 로깅 또는 로직 애널라이저 활용            |

---

### 🌐 9. 고급 주제

| 주제              | 설명                                                     |
| ----------------- | -------------------------------------------------------- |
| EEPROM 저장       | `EEPROM.read()`, `EEPROM.write()`로 비휘발성 데이터 저장 |
| 인터럽트 처리     | `attachInterrupt()`, ISR 함수 사용 예제                  |
| 소프트웨어 시리얼 | `SoftwareSerial` 사용으로 UART 확장                      |
| 저전력 모드       | `sleep` 사용 (AVR 기반 라이브러리 활용)                  |
| 다중 태스크       | `millis()` 기반 비동기 처리, FSM 구조 제안               |

---

### 🧪 10. 실전 프로젝트 예제 (Cookbook 스타일)

| 예제                  | 내용                                    |
| --------------------- | --------------------------------------- |
| 온도 센서 로거        | 센서값 측정 → 시리얼 출력/SD카드 저장   |
| RFID 기반 출입 시스템 | RFID 리더 연결 → 인증 확인 후 서보 작동 |
| 자동 조명 제어        | CDS 센서 + 릴레이로 밤에만 자동 점등    |
| 로봇 주행 제어        | PWM + 방향제어 회로로 DC 모터 제어      |

---

### 📁 부록: 유용한 라이브러리

| 용도       | 라이브러리                        |
| ---------- | --------------------------------- |
| 센서       | Adafruit Sensor, DHT, OneWire     |
| 디스플레이 | LiquidCrystal, U8g2, Adafruit GFX |
| 통신       | WiFi, LoRa, RF24, Ethernet        |
| 데이터     | EEPROM, SD, RTC (시간 저장용)     |

## 📘 1. 아두이노 기본 함수 정리

### 🔹 입출력 함수

| 함수                       | 설명                                                      |
| -------------------------- | --------------------------------------------------------- |
| `pinMode(pin, mode)`       | 핀의 입출력 모드 설정 (`INPUT`, `OUTPUT`, `INPUT_PULLUP`) |
| `digitalWrite(pin, value)` | 디지털 핀에 HIGH 또는 LOW 출력                            |
| `digitalRead(pin)`         | 디지털 핀에서 입력값 읽기                                 |
| `analogWrite(pin, value)`  | PWM 출력 (0\~255)                                         |
| `analogRead(pin)`          | 아날로그 값 읽기 (0\~1023)                                |

### 🔹 시간 함수

| 함수                    | 설명                                    |
| ----------------------- | --------------------------------------- |
| `delay(ms)`             | ms만큼 코드 실행을 지연                 |
| `millis()`              | 아두이노가 시작된 이후 경과한 시간 (ms) |
| `micros()`              | 마이크로초 단위 시간 반환               |
| `delayMicroseconds(us)` | us만큼 지연                             |

### 🔹 직렬 통신

| 함수                     | 설명                        |
| ------------------------ | --------------------------- |
| `Serial.begin(baudrate)` | 시리얼 통신 시작            |
| `Serial.print(data)`     | 데이터 출력 (줄바꿈 없음)   |
| `Serial.println(data)`   | 데이터 출력 후 줄바꿈       |
| `Serial.read()`          | 입력된 1바이트 읽기         |
| `Serial.available()`     | 읽을 수 있는 데이터 수 확인 |

---

## 📗 2. 고급 기술 및 라이브러리

### 🔸 인터럽트

```cpp
attachInterrupt(digitalPinToInterrupt(pin), ISR, mode);
```

- `ISR`: 인터럽트 발생 시 호출할 함수
- `mode`: `RISING`, `FALLING`, `CHANGE`, `LOW`

### 🔸 PWM 제어 (예: 서보)

```cpp
#include <Servo.h>
Servo myservo;
myservo.attach(9);
myservo.write(90);  // 90도로 회전
```

### 🔸 I2C 통신

```cpp
#include <Wire.h>
Wire.begin();               // 마스터 모드 시작
Wire.beginTransmission(8);  // 주소 8번 슬레이브에게 전송 시작
Wire.write("x");            // 데이터 전송
Wire.endTransmission();
```

### 🔸 SPI 통신

```cpp
#include <SPI.h>
SPI.begin();
SPI.transfer(0x42);  // 데이터 전송
```

---

## 📙 3. 유용한 라이브러리 예시

| 기능      | 라이브러리                | 설명                     |
| --------- | ------------------------- | ------------------------ |
| LCD 제어  | `LiquidCrystal`           | 16x2 등 문자 LCD         |
| 센서 I2C  | `Adafruit_Sensor`, `Wire` | 가속도계, 자이로 등      |
| Wi-Fi     | `WiFi.h` (ESP32/ESP8266)  | 인터넷 연결 및 서버 기능 |
| JSON 파싱 | `ArduinoJson`             | REST API 응답 파싱       |
| EEPROM    | `EEPROM.h`                | 비휘발성 메모리 저장     |

---

## 📒 4. 디버깅 & 테스트 팁

- `Serial.println("Debug")`: 코드 흐름 확인
- `F()` 매크로로 플래시 메모리 절약: `Serial.println(F("Hello"))`
- `assert()`, 사용자 정의 디버깅 매크로로 조건 검증

---

## 📓 5. 하드웨어 관련 팁

- 풀업 저항 내장: `pinMode(pin, INPUT_PULLUP);`
- PWM 가능한 핀: 보드마다 다름 (UNO 기준 3, 5, 6, 9, 10, 11)
- 전류 제한: 디지털 핀 당 약 40mA 이하 권장
- 아날로그 입력 핀: 0\~5V (보드에 따라 다름)

---

## 📁 6. 구조화된 프로젝트 디렉터리 예시

```
MyProject/
├── MyProject.ino
├── config.h
├── sensor.cpp
├── sensor.h
├── actuator.cpp
├── actuator.h
└── README.md
```
